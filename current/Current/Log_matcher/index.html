<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Log_matcher (current.Current.Log_matcher)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">current</a> &#x00BB; <a href="../index.html">Current</a> &#x00BB; Log_matcher</nav><h1>Module <code>Current.Log_matcher</code></h1><p>Analysing job logs.</p></header><dl><dt class="spec type" id="type-rule"><a href="#type-rule" class="anchor"></a><code><span class="keyword">type</span> rule</code><code> = </code><code>{</code><table class="record"><tr id="type-rule.pattern" class="anchored"><td class="def field"><a href="#type-rule.pattern" class="anchor"></a><code>pattern : string;</code></td></tr><tr id="type-rule.report" class="anchored"><td class="def field"><a href="#type-rule.report" class="anchor"></a><code>report : string;</code></td></tr><tr id="type-rule.score" class="anchored"><td class="def field"><a href="#type-rule.score" class="anchor"></a><code>score : int;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-analyse_job"><a href="#val-analyse_job" class="anchor"></a><code><span class="keyword">val</span> analyse_job : <a href="../Job/index.html#type-t">Job.t</a> <span>&#45;&gt;</span> <span>string option</span></code></dt><dd><p><code>analyse_job j</code> scans the logs for <code>j</code> looking for known patterns. If it finds any, it returns the report string for the best one, and also logs information about all found patterns.</p></dd></dl><dl><dt class="spec value" id="val-add_rule"><a href="#val-add_rule" class="anchor"></a><code><span class="keyword">val</span> add_rule : <a href="index.html#type-rule">rule</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Add a rule that matches log text against the PCRE <code>rule.pattern</code>. If it matches, the error will be <code>rule.report</code>. In <code>report</code>, &quot;\1&quot; is replaced by the first match group, etc. If multiple rules match, the one with the highest scrore is used. If two rules with the same score match, the first is used. If a rule already exists with the same pattern, it will be replaced.</p></dd></dl><dl><dt class="spec value" id="val-remove_rule"><a href="#val-remove_rule" class="anchor"></a><code><span class="keyword">val</span> remove_rule : string <span>&#45;&gt;</span> <span><span>(unit, <span>[&gt; `Rule_not_found ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>remove_rule pattern</code> removes a rule previously added by <code>add_rule</code>.</p></dd></dl><dl><dt class="spec value" id="val-list_rules"><a href="#val-list_rules" class="anchor"></a><code><span class="keyword">val</span> list_rules : unit <span>&#45;&gt;</span> <span><a href="index.html#type-rule">rule</a> list</span></code></dt><dd><p>Get the current set of rules.</p></dd></dl></div></body></html>