<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Current_cache__Db (current.Current_cache__Db)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">current</a> &#x00BB; Current_cache__Db</nav><h1>Module <code>Current_cache__Db</code></h1></header><dl><dt class="spec type" id="type-entry"><a href="#type-entry" class="anchor"></a><code><span class="keyword">type</span> entry</code><code> = </code><code>{</code><table class="record"><tr id="type-entry.job_id" class="anchored"><td class="def field"><a href="#type-entry.job_id" class="anchor"></a><code>job_id : string;</code></td></tr><tr id="type-entry.build" class="anchored"><td class="def field"><a href="#type-entry.build" class="anchor"></a><code>build : int64;</code></td></tr><tr id="type-entry.value" class="anchored"><td class="def field"><a href="#type-entry.value" class="anchor"></a><code>value : string;</code></td></tr><tr id="type-entry.outcome" class="anchored"><td class="def field"><a href="#type-entry.outcome" class="anchor"></a><code>outcome : <span>string <a href="../Current/index.html#type-or_error">Current.or_error</a></span>;</code></td></tr><tr id="type-entry.ready" class="anchored"><td class="def field"><a href="#type-entry.ready" class="anchor"></a><code>ready : float;</code></td></tr><tr id="type-entry.running" class="anchored"><td class="def field"><a href="#type-entry.running" class="anchor"></a><code>running : <span>float option</span>;</code></td></tr><tr id="type-entry.finished" class="anchored"><td class="def field"><a href="#type-entry.finished" class="anchor"></a><code>finished : float;</code></td></tr><tr id="type-entry.rebuild" class="anchored"><td class="def field"><a href="#type-entry.rebuild" class="anchor"></a><code>rebuild : bool;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-record"><a href="#val-record" class="anchor"></a><code><span class="keyword">val</span> record : <span>op:string</span> <span>&#45;&gt;</span> <span>key:string</span> <span>&#45;&gt;</span> <span>value:string</span> <span>&#45;&gt;</span> <span>job_id:string</span> <span>&#45;&gt;</span> <span>ready:Unix.tm</span> <span>&#45;&gt;</span> <span>running:<span>Unix.tm option</span></span> <span>&#45;&gt;</span> <span>finished:Unix.tm</span> <span>&#45;&gt;</span> <span>build:int64</span> <span>&#45;&gt;</span> <span>string <a href="../Current/index.html#type-or_error">Current.or_error</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>record ~op ~key ~value ~job_id ~ready ~running ~finished ~build outcome</code> records that <code>key</code> is now set to <code>value</code>, producing <code>outcome</code>. This replaces any previous entry.</p><dl><dt>parameter ready</dt><dd><p>When the job was ready to start (i.e. enqueued).</p></dd></dl><dl><dt>parameter running</dt><dd><p>When the job started running.</p></dd></dl><dl><dt>parameter finished</dt><dd><p>When the job stopped running (i.e. now).</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-lookup"><a href="#val-lookup" class="anchor"></a><code><span class="keyword">val</span> lookup : <span>op:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="index.html#type-entry">entry</a> option</span></code></dt><dd><p><code>lookup ~op key</code> returns the most recently stored result for <code>op</code> and <code>key</code>, if any.</p></dd></dl><dl><dt class="spec value" id="val-drop_all"><a href="#val-drop_all" class="anchor"></a><code><span class="keyword">val</span> drop_all : string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>drop_all op</code> drops all cached entries for <code>op</code>.</p></dd></dl><dl><dt class="spec value" id="val-invalidate"><a href="#val-invalidate" class="anchor"></a><code><span class="keyword">val</span> invalidate : <span>op:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>invalidate ~op key</code> removes any existing entry for <code>op, key</code>.</p></dd></dl><dl><dt class="spec value" id="val-lookup_job_id"><a href="#val-lookup_job_id" class="anchor"></a><code><span class="keyword">val</span> lookup_job_id : string <span>&#45;&gt;</span> <span><span>(string * string)</span> option</span></code></dt><dd><p><code>lookup_job_id x</code> is the (op, key) of job <code>x</code>, if known.</p></dd></dl><aside><p>These functions are described in the <a href="../Current_cache/index.html"><code>Current_cache</code></a> public API.</p></aside><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : unit <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-query"><a href="#val-query" class="anchor"></a><code><span class="keyword">val</span> query : <span>?&#8288;op:string</span> <span>&#45;&gt;</span> <span>?&#8288;ok:bool</span> <span>&#45;&gt;</span> <span>?&#8288;rebuild:bool</span> <span>&#45;&gt;</span> <span>?&#8288;job_prefix:string</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><a href="index.html#type-entry">entry</a> list</span></code></dt><dt class="spec value" id="val-history"><a href="#val-history" class="anchor"></a><code><span class="keyword">val</span> history : <span>limit:int</span> <span>&#45;&gt;</span> <span>op:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="index.html#type-entry">entry</a> list</span></code></dt><dt class="spec value" id="val-ops"><a href="#val-ops" class="anchor"></a><code><span class="keyword">val</span> ops : unit <span>&#45;&gt;</span> <span>string list</span></code></dt></dl></div></body></html>