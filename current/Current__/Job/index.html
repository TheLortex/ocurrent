<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Job (current.Current__.Job)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">current</a> &#x00BB; <a href="../index.html">Current__</a> &#x00BB; Job</nav><h1>Module <code>Current__.Job</code></h1></header><div class="spec module" id="module-Metrics"><a href="#module-Metrics" class="anchor"></a><code><span class="keyword">module</span> <a href="Metrics/index.html">Metrics</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Map"><a href="#module-Map" class="anchor"></a><code><span class="keyword">module</span> <a href="Map/index.html">Map</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-timestamp"><a href="#val-timestamp" class="anchor"></a><code><span class="keyword">val</span> timestamp : <span><span>(unit <span>&#45;&gt;</span> float)</span> Stdlib.ref</span></code></dt><dt class="spec value" id="val-sleep"><a href="#val-sleep" class="anchor"></a><code><span class="keyword">val</span> sleep : <span><span>(float <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span> Stdlib.ref</span></code></dt></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = </code><code>{</code><table class="record"><tr id="type-t.switch" class="anchored"><td class="def field"><a href="#type-t.switch" class="anchor"></a><code>switch : <a href="../../Current/Switch/index.html#type-t">Current.Switch.t</a>;</code></td></tr><tr id="type-t.config" class="anchored"><td class="def field"><a href="#type-t.config" class="anchor"></a><code>config : <a href="../../Current/Config/index.html#type-t">Current.Config.t</a>;</code></td></tr><tr id="type-t.id" class="anchored"><td class="def field"><a href="#type-t.id" class="anchor"></a><code>id : string;</code></td></tr><tr id="type-t.priority" class="anchored"><td class="def field"><a href="#type-t.priority" class="anchor"></a><code>priority : <a href="../../Current/Pool/index.html#type-priority">Current.Pool.priority</a>;</code></td></tr><tr id="type-t.set_start_time" class="anchored"><td class="def field"><a href="#type-t.set_start_time" class="anchor"></a><code>set_start_time : <span>float Lwt.u</span>;</code></td></tr><tr id="type-t.start_time" class="anchored"><td class="def field"><a href="#type-t.start_time" class="anchor"></a><code>start_time : <span>float Lwt.t</span>;</code></td></tr><tr id="type-t.ch" class="anchored"><td class="def field"><a href="#type-t.ch" class="anchor"></a><code><span class="keyword">mutable</span> ch : <span>Stdlib.out_channel option</span>;</code></td></tr><tr id="type-t.log_cond" class="anchored"><td class="def field"><a href="#type-t.log_cond" class="anchor"></a><code>log_cond : <span>unit Lwt_condition.t</span>;</code></td></tr><tr id="type-t.explicit_confirm" class="anchored"><td class="def field"><a href="#type-t.explicit_confirm" class="anchor"></a><code>explicit_confirm : <span>unit Lwt.t</span>;</code></td></tr><tr id="type-t.set_explicit_confirm" class="anchored"><td class="def field"><a href="#type-t.set_explicit_confirm" class="anchor"></a><code>set_explicit_confirm : <span>unit Lwt.u</span>;</code></td></tr><tr id="type-t.cancel_hooks" class="anchored"><td class="def field"><a href="#type-t.cancel_hooks" class="anchor"></a><code><span class="keyword">mutable</span> cancel_hooks : <span>[ <span>`Hooks of <span><span>(string <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span> Lwt_dllist.t</span></span> <span><span>| `Cancelled</span> of string</span> ]</span>;</code></td></tr><tr id="type-t.waiting_for_confirmation" class="anchored"><td class="def field"><a href="#type-t.waiting_for_confirmation" class="anchor"></a><code><span class="keyword">mutable</span> waiting_for_confirmation : bool;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-jobs"><a href="#val-jobs" class="anchor"></a><code><span class="keyword">val</span> jobs : <span><span><a href="index.html#type-t">t</a> <a href="Map/index.html#type-t">Map.t</a></span> Stdlib.ref</span></code></dt><dt class="spec value" id="val-open_temp_file"><a href="#val-open_temp_file" class="anchor"></a><code><span class="keyword">val</span> open_temp_file : <span>dir:Fpath.t</span> <span>&#45;&gt;</span> <span>prefix:string</span> <span>&#45;&gt;</span> <span>suffix:string</span> <span>&#45;&gt;</span> Fpath.t * Stdlib.out_channel</code></dt><dt class="spec value" id="val-write"><a href="#val-write" class="anchor"></a><code><span class="keyword">val</span> write : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-log"><a href="#val-log" class="anchor"></a><code><span class="keyword">val</span> log : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, Stdlib.Format.formatter, unit, unit, unit, unit)</span> Stdlib.format6</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-id"><a href="#val-id" class="anchor"></a><code><span class="keyword">val</span> id : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-jobs_dir"><a href="#val-jobs_dir" class="anchor"></a><code><span class="keyword">val</span> jobs_dir : <span>Fpath.t lazy_t</span></code></dt><dt class="spec value" id="val-log_path"><a href="#val-log_path" class="anchor"></a><code><span class="keyword">val</span> log_path : string <span>&#45;&gt;</span> <span><span>(Fpath.t, <span>[&gt; Rresult.R.msg ]</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-id_of_path"><a href="#val-id_of_path" class="anchor"></a><code><span class="keyword">val</span> id_of_path : Fpath.t <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-run_cancel_hooks"><a href="#val-run_cancel_hooks" class="anchor"></a><code><span class="keyword">val</span> run_cancel_hooks : <span>reason:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span> Lwt_dllist.t</span> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dt class="spec value" id="val-cancel"><a href="#val-cancel" class="anchor"></a><code><span class="keyword">val</span> cancel : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : <span>?&#8288;priority:<a href="../../Current/Pool/index.html#type-priority">Current.Pool.priority</a></span> <span>&#45;&gt;</span> <span>switch:<a href="../../Current/Switch/index.html#type-t">Current.Switch.t</a></span> <span>&#45;&gt;</span> <span>label:string</span> <span>&#45;&gt;</span> <span>config:<a href="../../Current/Config/index.html#type-t">Current.Config.t</a></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-pp_id"><a href="#val-pp_id" class="anchor"></a><code><span class="keyword">val</span> pp_id : <span>string Fmt.t</span></code></dt><dt class="spec value" id="val-is_running"><a href="#val-is_running" class="anchor"></a><code><span class="keyword">val</span> is_running : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-on_cancel"><a href="#val-on_cancel" class="anchor"></a><code><span class="keyword">val</span> on_cancel : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>(string <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dt class="spec value" id="val-with_handler"><a href="#val-with_handler" class="anchor"></a><code><span class="keyword">val</span> with_handler : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>on_cancel:<span>(string <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span></span> <span>&#45;&gt;</span> <span>(unit <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Lwt.t</span></code></dt><dt class="spec value" id="val-use_pool"><a href="#val-use_pool" class="anchor"></a><code><span class="keyword">val</span> use_pool : <span>?&#8288;priority:<a href="../../Current/Pool/index.html#type-priority">Current.Pool.priority</a></span> <span>&#45;&gt;</span> <span>switch:<a href="../../Current/Switch/index.html#type-t">Current.Switch.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Current/Pool/index.html#type-t">Current.Pool.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Lwt.t</span></code></dt><dt class="spec value" id="val-no_pool"><a href="#val-no_pool" class="anchor"></a><code><span class="keyword">val</span> no_pool : <span>unit <a href="../../Current/Pool/index.html#type-t">Current.Pool.t</a></span></code></dt><dt class="spec value" id="val-confirm"><a href="#val-confirm" class="anchor"></a><code><span class="keyword">val</span> confirm : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>pool:<span><span class="type-var">'a</span> <a href="../../Current/Pool/index.html#type-t">Current.Pool.t</a></span></span> <span>&#45;&gt;</span> <a href="../../Current/Level/index.html#type-t">Current.Level.t</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Lwt.t</span></code></dt><dt class="spec value" id="val-pp_duration"><a href="#val-pp_duration" class="anchor"></a><code><span class="keyword">val</span> pp_duration : Stdlib.Format.formatter <span>&#45;&gt;</span> Duration.t <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-start_with"><a href="#val-start_with" class="anchor"></a><code><span class="keyword">val</span> start_with : <span>?&#8288;timeout:Duration.t</span> <span>&#45;&gt;</span> <span>pool:<span><span class="type-var">'a</span> <a href="../../Current/Pool/index.html#type-t">Current.Pool.t</a></span></span> <span>&#45;&gt;</span> <span>level:<a href="../../Current/Level/index.html#type-t">Current.Level.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Lwt.t</span></code></dt><dt class="spec value" id="val-start"><a href="#val-start" class="anchor"></a><code><span class="keyword">val</span> start : <span>?&#8288;timeout:Duration.t</span> <span>&#45;&gt;</span> <span>?&#8288;pool:<span>unit <a href="../../Current/Pool/index.html#type-t">Current.Pool.t</a></span></span> <span>&#45;&gt;</span> <span>level:<a href="../../Current/Level/index.html#type-t">Current.Level.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dt class="spec value" id="val-start_time"><a href="#val-start_time" class="anchor"></a><code><span class="keyword">val</span> start_time : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>float Lwt.t</span></code></dt><dt class="spec value" id="val-wait_for_log_data"><a href="#val-wait_for_log_data" class="anchor"></a><code><span class="keyword">val</span> wait_for_log_data : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dt class="spec value" id="val-lookup_running"><a href="#val-lookup_running" class="anchor"></a><code><span class="keyword">val</span> lookup_running : <a href="Map/index.html#type-key">Map.key</a> <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> option</span></code></dt><dt class="spec value" id="val-is_waiting_for_confirmation"><a href="#val-is_waiting_for_confirmation" class="anchor"></a><code><span class="keyword">val</span> is_waiting_for_confirmation : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-approve_early_start"><a href="#val-approve_early_start" class="anchor"></a><code><span class="keyword">val</span> approve_early_start : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-cancelled_state"><a href="#val-cancelled_state" class="anchor"></a><code><span class="keyword">val</span> cancelled_state : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(unit, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-jobs"><a href="#val-jobs" class="anchor"></a><code><span class="keyword">val</span> jobs : unit <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> <a href="Map/index.html#type-t">Map.t</a></span></code></dt></dl></div></body></html>